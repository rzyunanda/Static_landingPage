<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Keindahan Indonesia ‚Äî Demo Kepatuhan UU PDP</title>
  <style>
    :root{
      --bg:#0b1020;--card:#121936;--muted:#98a2b3;--brand:#00d2a8;--brand-2:#4ac1ff;--danger:#ff5a7a;--ok:#22c55e;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial;line-height:1.6;color:#e6e9ef;background:radial-gradient(1200px 800px at 85% -10%,rgba(74,193,255,.16),transparent),linear-gradient(180deg,rgba(0,210,168,.08),transparent 40%),var(--bg)}
    a{color:var(--brand-2)}
    header{position:relative;overflow:hidden}
    .nav{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;max-width:1100px;margin:0 auto}
    .logo{font-weight:800;letter-spacing:.3px;font-size:18px}
    .cta{display:inline-flex;gap:12px;align-items:center}
    .btn{padding:10px 14px;border:1px solid rgba(255,255,255,.12);border-radius:999px;background:transparent;color:#fff;cursor:pointer}
    .btn.brand{background:linear-gradient(90deg,var(--brand),var(--brand-2));border:none}
    .hero{max-width:1100px;margin:40px auto;padding:24px;display:grid;grid-template-columns:1.2fr .8fr;gap:28px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,.35)}
    .hero .left{padding:28px}
    .eyebrow{color:var(--brand-2);text-transform:uppercase;letter-spacing:.2em;font-size:12px;font-weight:700}
    h1{margin:.4em 0 .3em;font-size:48px;line-height:1.1}
    .lead{color:#d1d6e0;font-size:18px}
    .chiprow{margin-top:18px;display:flex;flex-wrap:wrap;gap:10px}
    .chip{font-size:12px;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1)}
    .hero .right{display:grid;gap:14px}
    .photo{height:170px;border-radius:16px;background-size:cover;background-position:center;border:1px solid rgba(255,255,255,.08)}
    .photo.p1{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2)),url('https://images.unsplash.com/photo-1543248939-bc7d5a3f09d6?q=80&w=1600&auto=format&fit=crop');}
    .photo.p2{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2)),url('https://images.unsplash.com/photo-1470124182917-cc6e71b22ecc?q=80&w=1600&auto=format&fit=crop');}
    .photo.p3{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2)),url('https://images.unsplash.com/photo-1506929562872-bb421503ef21?q=80&w=1600&auto=format&fit=crop');}

    .section{max-width:1100px;margin:24px auto;padding:0 24px}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .tile{padding:18px;border-radius:16px}
    .tile h3{margin:8px 0 6px}
    .muted{color:var(--muted)}

    .policy.card{padding:22px;margin-top:24px}
    .policy h2{margin:0 0 6px}
    .policy ul{margin:0 0 0 18px}

    footer{margin:42px 0 80px;text-align:center;color:var(--muted)}

    /* Consent banner */
    .banner{position:fixed;inset:auto 12px 12px 12px;display:none;gap:14px;flex-wrap:wrap;padding:16px;border-radius:14px;background:#0b122b;border:1px solid rgba(255,255,255,.12);box-shadow:0 18px 40px rgba(0,0,0,.5);z-index:50}
    .banner .actions{display:flex;gap:10px;margin-left:auto}
    .btn.subtle{background:rgba(255,255,255,.06)}

    /* Preferences modal */
    dialog{width:min(680px,94vw);border:none;border-radius:16px;background:#0b122b;color:#fff;padding:0;box-shadow:0 22px 60px rgba(0,0,0,.6)}
    dialog::backdrop{background:rgba(0,0,0,.6)}
    .modal-hd{display:flex;justify-content:space-between;align-items:center;padding:16px 18px;border-bottom:1px solid rgba(255,255,255,.12)}
    .modal-bd{padding:16px 18px}
    .pref{display:flex;justify-content:space-between;align-items:center;padding:14px;border:1px solid rgba(255,255,255,.1);border-radius:12px;margin-bottom:10px}
    .pref label{font-weight:600}
    .switch{appearance:none;width:44px;height:26px;border-radius:999px;background:#2a335a;position:relative;outline:none;cursor:pointer;border:1px solid rgba(255,255,255,.15)}
    .switch:checked{background:linear-gradient(90deg,var(--brand),var(--brand-2))}
    .switch::after{content:"";position:absolute;top:2px;left:2px;width:20px;height:20px;border-radius:50%;background:#fff;transition:all .2s ease}
    .switch:checked::after{left:22px}
    .tag{font-size:12px;background:rgba(255,255,255,.08);padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.12)}

    .manage-consent{position:fixed;right:12px;bottom:12px;z-index:40}

    @media (max-width:900px){
      .hero{grid-template-columns:1fr}
      .grid{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <header>
    <nav class="nav">
      <div class="logo">Nusantara<span style="color:var(--brand-2)">Vista</span></div>
      <div class="cta">
        <button class="btn" id="openPolicy">Kebijakan Privasi</button>
        <button class="btn brand" id="openPrefs">Kelola Persetujuan</button>
      </div>
    </nav>
  </header>

  <section class="hero">
    <div class="left card">
      <div class="eyebrow">Demo Kepatuhan UU PDP</div>
      <h1>Keindahan Alam Indonesia</h1>
      <p class="lead">Dari Sabang sampai Merauke: pantai tropis, pegunungan hijau, dan budaya yang kaya. Situs demo ini menunjukkan bagaimana sebuah website memberi <strong>opsi persetujuan (consent)</strong> sesuai UU No. 27/2022 tentang Perlindungan Data Pribadi.</p>
      <div class="chiprow">
        <span class="chip">üèùÔ∏è Raja Ampat</span>
        <span class="chip">‚õ∞Ô∏è Bromo</span>
        <span class="chip">üåã Rinjani</span>
        <span class="chip">üåø Toba</span>
      </div>
    </div>
    <div class="right">
      <div class="photo p1 card" title="Raja Ampat"></div>
      <div class="photo p2 card" title="Gunung Bromo"></div>
      <div class="photo p3 card" title="Danau Toba"></div>
    </div>
  </section>

  <section class="section">
    <div class="grid">
      <div class="tile card">
        <h3>Transparansi</h3>
        <p class="muted">Kami menjelaskan kategori data, tujuan pemrosesan, dan dasar hukum yang relevan. Pengguna dapat menolak non-esensial tanpa mengurangi fungsi utama.</p>
      </div>
      <div class="tile card">
        <h3>Kontrol Pengguna</h3>
        <p class="muted">Semua cookie/skrip non-esensial <em>opt‚Äëin</em> (nonaktif secara default). Anda dapat mengubah pilihan kapan saja.</p>
      </div>
      <div class="tile card">
        <h3>Minimisasi Data</h3>
        <p class="muted">Kami hanya mengumpulkan data seperlunya untuk menyediakan layanan dan menganonimkan bila memungkinkan.</p>
      </div>
    </div>

    <div class="policy card" id="policy">
      <h2>Ringkasan Kebijakan Privasi</h2>
      <p class="muted">Landasan: UU No. 27/2022 (PDP). Dasar pemrosesan: <strong>persetujuan</strong> (untuk analitik & pemasaran), <strong>perjanjian</strong> (untuk layanan inti), dan <strong>kepatuhan hukum</strong> bila diperlukan.</p>
      <ul>
        <li><strong>Data yang diproses:</strong> identitas akun (nama, email), data perangkat/telemetri, preferensi kunjungan.</li>
        <li><strong>Tujuan:</strong> pengalaman situs, analitik kunjungan, personalisasi konten promosi destinasi.</li>
        <li><strong>Hak Anda:</strong> akses, perbaikan, penghapusan, portabilitas, pembatasan, keberatan, dan <em>menarik persetujuan</em>.</li>
        <li><strong>Pihak ketiga:</strong> hanya bila Anda menyetujui kategori terkait (mis. analitik atau pemasaran).</li>
        <li><strong>Penyimpanan:</strong> preferensi consent disimpan di <code>localStorage</code> maksimal 12 bulan (contoh).</li>
      </ul>
      <p class="muted">Untuk permintaan hak subjek data, gunakan formulir berikut (contoh, non-produksi):</p>
      <form id="dsrForm" class="card" style="padding:12px;margin-top:8px">
        <label>Alamat Email
          <input required type="email" name="email" placeholder="nama@contoh.id" style="width:100%;padding:10px;margin-top:6px;border-radius:10px;border:1px solid rgba(255,255,255,.16);background:transparent;color:#fff">
        </label>
        <label style="display:block;margin-top:8px">Jenis Permintaan
          <select name="type" style="width:100%;padding:10px;margin-top:6px;border-radius:10px;border:1px solid rgba(255,255,255,.16);background:transparent;color:#fff">
            <option value="akses">Akses Data</option>
            <option value="hapus">Hapus Data (Right to be Forgotten)</option>
            <option value="perbaiki">Perbaiki Data</option>
            <option value="tarik">Tarik Persetujuan</option>
          </select>
        </label>
        <button class="btn brand" style="margin-top:10px" type="submit">Kirim Permintaan</button>
        <span id="dsrMsg" class="muted" style="margin-left:10px"></span>
      </form>
    </div>
  </section>

  <footer>
    ¬© <span id="year"></span> NusantaraVista ‚Ä¢ <button class="btn subtle" id="openPrefs2">Kelola Persetujuan</button>
  </footer>

  <!-- Consent Banner -->
  <div class="banner" id="consentBanner" role="dialog" aria-live="polite">
    <div style="max-width:620px">
      <strong>Kontrol Privasi Anda</strong>
      <div class="muted">Kami menggunakan cookie dan teknologi serupa untuk fungsi esensial, serta analitik dan pemasaran <em>hanya jika Anda setuju</em>. Anda dapat menolak atau mengelola preferensi.</div>
      <div class="muted" style="font-size:12px;margin-top:4px">Dengan menolak, kami tidak menjalankan skrip non‚Äëesensial. Pelajari lebih lanjut di <a href="#policy">Kebijakan Privasi</a>.</div>
    </div>
    <div class="actions">
      <button class="btn subtle" id="rejectAll">Tolak Non‚ÄëEsensial</button>
      <button class="btn" id="customize">Sesuaikan</button>
      <button class="btn brand" id="acceptAll">Izinkan Semua</button>
    </div>
  </div>

  <button class="btn subtle manage-consent" id="manageFloating">Kelola Persetujuan</button>

  <!-- Preferences Modal -->
  <dialog id="prefsModal" aria-labelledby="prefsTitle">
    <div class="modal-hd">
      <div>
        <div class="eyebrow">Preferensi Privasi</div>
        <h3 id="prefsTitle" style="margin:4px 0 0">Kelola Persetujuan Anda</h3>
      </div>
      <button class="btn subtle" id="closePrefs">Tutup</button>
    </div>
    <div class="modal-bd">
      <div class="pref">
        <div>
          <label>Esensial (wajib) <span class="tag">Selalu aktif</span></label>
          <div class="muted">Diperlukan untuk keamanan, login, dan fungsi inti situs. Tidak membutuhkan persetujuan.</div>
        </div>
        <input type="checkbox" disabled checked aria-label="Esensial selalu aktif" />
      </div>
      <div class="pref">
        <div>
          <label for="consent-analytics">Analitik</label>
          <div class="muted">Bantu kami memahami kunjungan secara agregat. Contoh: memuat skrip analytics.</div>
        </div>
        <input class="switch" id="consent-analytics" type="checkbox" />
      </div>
      <div class="pref">
        <div>
          <label for="consent-marketing">Pemasaran</label>
          <div class="muted">Personalisasi promosi destinasi & penawaran wisata.</div>
        </div>
        <input class="switch" id="consent-marketing" type="checkbox" />
      </div>
      <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:10px">
        <button class="btn subtle" id="saveReject">Simpan: Tolak Non‚ÄëEsensial</button>
        <button class="btn brand" id="savePrefs">Simpan Preferensi</button>
      </div>
    </div>
  </dialog>

  <!-- Privacy Policy Modal (quick view) -->
  <dialog id="policyModal">
    <div class="modal-hd">
      <h3 style="margin:0">Kebijakan Privasi (Ringkas)</h3>
      <button class="btn subtle" id="closePolicy">Tutup</button>
    </div>
    <div class="modal-bd">
      <p>Kami memproses data pribadi sesuai UU PDP dengan prinsip: <em>transparansi, tujuan spesifik, minimisasi, akurasi, pembatasan penyimpanan, keamanan, akuntabilitas</em>. Untuk hak subjek data, silakan gunakan formulir di bagian <a href="#policy">Ringkasan</a>.</p>
    </div>
  </dialog>

  <script>
  (function(){
    const LS_KEY = 'consent.preferences.v1';
    const TTL_MONTHS = 12;
    const yearEl = document.getElementById('year'); yearEl.textContent = new Date().getFullYear();

    const banner = document.getElementById('consentBanner');
    const prefsModal = document.getElementById('prefsModal');
    const policyModal = document.getElementById('policyModal');

    const elAnalytics = document.getElementById('consent-analytics');
    const elMarketing = document.getElementById('consent-marketing');

    function getPrefs(){
      try{
        const raw = localStorage.getItem(LS_KEY);
        if(!raw) return null;
        const obj = JSON.parse(raw);
        if(obj && obj.expires && Date.now() > obj.expires){
          localStorage.removeItem(LS_KEY);
          return null;
        }
        return obj;
      }catch(e){return null}
    }

    function savePrefs({analytics=false, marketing=false}){
      const expires = new Date();
      expires.setMonth(expires.getMonth() + TTL_MONTHS);
      const data = {version:1, analytics:!!analytics, marketing:!!marketing, updated:Date.now(), expires:+expires};
      localStorage.setItem(LS_KEY, JSON.stringify(data));
      document.documentElement.dataset.analytics = data.analytics ? 'on' : 'off';
      document.documentElement.dataset.marketing = data.marketing ? 'on' : 'off';
      // Contoh: hanya load skrip non-esensial bila diizinkan
      mountNonEssential(data);
    }

    function mountNonEssential(p){
      // Bersihkan placeholder sebelumnya
      const ex = document.getElementById('mock-analytics');
      if(ex) ex.remove();
      if(p.analytics){
        // Demo: alih-alih memuat GA, kita log & simulasikan event
        const s = document.createElement('script');
        s.id = 'mock-analytics';
        s.textContent = "window.__mockAnalytics=1; console.log('[ANALYTICS] aktif karena pengguna setuju.');";
        document.body.appendChild(s);
      }
      if(p.marketing){
        console.log('[MARKETING] personalisasi aktif.');
      }
    }

    function openPrefs(){ if(typeof prefsModal.showModal==='function') prefsModal.showModal(); }
    function closePrefs(){ if(typeof prefsModal.close==='function') prefsModal.close(); }
    function openPolicy(){ if(typeof policyModal.showModal==='function') policyModal.showModal(); }
    function closePolicy(){ if(typeof policyModal.close==='function') policyModal.close(); }

    // Banner display logic: only show if no valid prefs
    const existing = getPrefs();
    if(existing){
      elAnalytics.checked = !!existing.analytics;
      elMarketing.checked = !!existing.marketing;
      mountNonEssential(existing);
    }else{
      banner.style.display = 'flex';
    }

    // Banner actions
    document.getElementById('acceptAll').addEventListener('click', ()=>{
      savePrefs({analytics:true, marketing:true});
      banner.style.display = 'none';
    });
    document.getElementById('rejectAll').addEventListener('click', ()=>{
      savePrefs({analytics:false, marketing:false});
      banner.style.display = 'none';
    });
    document.getElementById('customize').addEventListener('click', ()=>{
      openPrefs();
    });

    // Modal actions
    document.getElementById('savePrefs').addEventListener('click', ()=>{
      savePrefs({analytics:elAnalytics.checked, marketing:elMarketing.checked});
      closePrefs();
      banner.style.display = 'none';
    });
    document.getElementById('saveReject').addEventListener('click', ()=>{
      elAnalytics.checked = false; elMarketing.checked = false;
      savePrefs({analytics:false, marketing:false});
      closePrefs();
      banner.style.display = 'none';
    });

    // Openers
    document.getElementById('openPrefs').addEventListener('click', openPrefs);
    document.getElementById('openPrefs2').addEventListener('click', openPrefs);
    document.getElementById('manageFloating').addEventListener('click', openPrefs);
    document.getElementById('openPolicy').addEventListener('click', openPolicy);

    // Closers
    document.getElementById('closePrefs').addEventListener('click', closePrefs);
    document.getElementById('closePolicy').addEventListener('click', closePolicy);

    // Demo DSR form submit (no network)
    document.getElementById('dsrForm').addEventListener('submit', (e)=>{
      e.preventDefault();
      const msg = document.getElementById('dsrMsg');
      msg.textContent = 'Permintaan diterima (demo). Kami akan merespons sesuai UU PDP.';
      setTimeout(()=>{msg.textContent='';},4000);
      e.target.reset();
    });
  })();
  </script>
</body>
</html>
